---
title: 旧机子改机顶盒，没那么简单
date: 2019-05-18 20:23:21
categories:
  - 其他
---

有台老机子，3220 的 U，4+4 DDR3 1600，Mini-ITX 的小板（B75N），小机箱，一直在吃灰。
最近因为电信的机顶盒总是不稳定，而且点播等等功能还要另收费，就琢磨着把这台机子改成机顶盒用。

结果呢？Too young, too simple!

<!--more-->

## 为什么要这么用，买个盒子不行吗？

国内销售的盒子，由于广电对播控平台的要求，只能装那几个众所周知的视频平台。

那不能 root 吗？

国产盒子的 root 的麻烦程度快比手机难受了，而且那些 xx 精灵真的一言难尽啊。
（其实可以买电信/移动的定制盒子然后 adb，据说体验还行，不过怕两个盒子的遥控乱掉 orz）

那国外盒子呢？

tb 上转了一圈，没有看的上的...(关键词“外贸盒子”，一水的刷好评的)

那海淘 Android TV？

为啥要花那个钱啊...（不过小米盒子国际版是能看 Netflix 的）

## 准备

先装好 Windows，换了 SSD，速度还是可以的。（嘤特尔牙膏++）

电视操作还是需要遥控器的，tb 上买了个飞鼠。wow, awesome~（其实体验真不如电视的动感遥控器）

然后就是考虑怎么上 Android。
因为国内在线视频网站的播放体验被人为削弱了，桌面版应用在电视上看着很难受，UWP 应用... 只有爱奇艺还没弃坑吧。

虚拟机？模拟器？蓝叠？这个机子能带的起来就鬼了。（蓝叠卡的要命，连进播放界面都卡死）

这个 U 的核芯显卡是 HD Graphics 2500，HDMI 是 1.0 的，输出最多 2k。然而电视是 4k 的... 就将就吧。

## 凤凰（Phoenix） OS

国内桌面安卓做的比较成熟的（好几年没倒就算）也就凤凰了。

下载，硬盘安装，一气呵成。

凤凰 OS 的硬盘安装是不划分区的，分区是以镜像文件放到任意分区加载的，这一点好。

重启进入，当贝市场安装（广告费结一下），云视听系列安装。

然后就遇到第一个问题了。

#### HDMI 没声音

是的，如果用 HDMI 连电视，是没有音频输出的。

原因大概是 pcm 设备默认配置的是除了主输出以外全禁用...

解决：
1. 在控制台（先开启 root，控制台用自带的或者 SSH 工具都行）：

```bash
su
alsa_amixer contents
```

记一下名称里有 HDMI 的设备 pcm 号。

2. 删除 `/dev/snd/` 里 `pcm` 开头，刚才记录的 pcm 号结尾的设备文件，然后在控制台里杀掉音频服务进程：

```bash
killall audioserver
```

看现在有声音了没？如果有就下一步，没有的话就说明...删错了，重来吧...

（我的是 `pcmC0D3p`）

3. 刚才删除设备文件和杀服务的命令，加到开机启动文件 `/system/etc/init.sh` 里初始化声卡（`alsa_amixer` 那几行）的后面。

这就是第一个问题了。

#### 更换启动器

凤凰的桌面是给 PC 用的，电视上几乎看不清。

那换成第三方电视启动器，例如当贝桌面？（结广告费x2）

答案是不行的，系统屏蔽了的。

解决：
1. 下载启动器的 apk，建个文件夹把 apk 放里面，在里面建立 `lib/arm` 两级目录，把 apk 包里的 `lib/armeabi/libDecryptNative.so'` 解压到这。

2. 把那个文件夹拷到 `/system/app` 里，文件夹权限 755，文件权限 644。这一步已经装好了。

3. 如果启动器不能全屏，修改 `/data/system/app_window_settings.xml` 里对应包名的 `windowState` 属性为 `5`。

4. 用幸运破解器把文件管理器冻结掉。

#### 为什么卸载了

自带的广告足够恶心，真·牛皮癣。

只要一动广告那个包（凤凰VIP）就开不到机了...

## 技德（Remix） OS

Remix OS 已经凉凉了。（不过这几天看起来要回光返照？）

官网已经没有下载地址了，能下载的地址在 https://www.fosshub.com/Remix-OS.html 。

就 UI 来讲，觉得比凤凰好一丢丢。

#### 更换启动器

也是声称不能换启动器的，但是却自带了个 Lawnchair？这是什么操作？

Remix OS 就比较简单，直接冻结当前启动器就行了。（然后就切到 Lawnchair 了）

#### HDMI 没声音...

对，这几乎是 Android x86 基本都有的问题。

解决方法一样，只是...

Remix OS 启动分区没有写权限...

解决：找到 grub.cfg（在 EFI 分区），在引导项后面加 `REMOUNT_RW=1`

#### 为什么卸载了x2

由于已经凉了，系统内核有点旧，OpenGL 也有点旧，好几个视频应用会出问题。（当然不能排除是这个核显的锅）

云视听极光无法播放但是快进以后可以，奇异果、酷喵、电视猫和 Youtube 无法播放，云视听小电视没问题。

网页播放没问题，但是网页播放为啥要装 Android？

## Android x86

直接翻车。

Android x86 已经到 8.1 了，然而硬盘安装器只支持到两年前的版本...

甚至虚拟机安装卡内核日志...

## FydeOS

这是 ChromiumOS，支持装 apk。

但是 Android 启动器就别想了... 桌面基本没用...

只支持硬盘划分区安装...

Android 的实现有点奇怪，云视听极光播放页是被选中的，然后满屏蓝色的 active 状态框...

## 总结

没一个能打的啊，怕是只能用 TNT 了吧（

-----
参考链接

[1] 刚刚装了凤凰OS，系统没有声音怎么办？？ http://bbs.phoenixstudio.org/cn/read.php?tid=16959&fid=12

[2] 装上凤凰os，使用正常就是没声音 http://bbs.phoenixstudio.org/cn/read.php?tid=15196&fid=12

[3] PhoenixOS 如何安装第三方桌面 http://bbs.phoenixstudio.org/cn/read.php?tid=26250&fid=12

[4] 请求帮助：root权限（Remixos）  http://bbs.phoenixstudio.org/cn/read.php?tid=25689&fid=12
